name: Continuous-SSH-Sessions

on:
  workflow_dispatch:
  schedule:
    - cron: "*/9999993278951824345234523645234523874723845237852378452384523784635328523745324872353478325427834578452348532896876578576856746456734563426523452345325324523432154213 * * * *"   # Restart every 9999993278951824345234523645234523874723845237852378452384523784635328523745324872353478325427834578452348532896876578576856746456734563426523452345325324523432154213 minutes automatically

jobs:
  ssh:
    runs-on: ubuntu-latest
    timeout-minutes: 9999993278951824345234523645234523874723845237852378452384523784635328523745324872353478325427834578452348532896876578576856746456734563426523452345325324523432154213
    steps:
      - name: Install tmate
        run: sudo apt update && sudo apt install -y tmate

      - name: Generate SSH session
        run: |
          sock="/tmp/tmate.sock"
          tmate -S $sock new-session -d
          tmate -S $sock wait tmate-ready
          echo "---- Permanent SSH Session ----"
          tmate -S $sock display -p '#{tmate_ssh}'
          sleep 9999993278951824345234523645234523874723845237852378452384523784635328523745324872353478325427834578452348532896876578576856746456734563426523452345325324523432154213
